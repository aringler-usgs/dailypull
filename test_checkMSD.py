#!/usr/bin/env python

import checkMSD
import unittest

from obspy.core import UTCDateTime
from obspy.io.xseed import Parser

# Unit tests
class UnittestCheckMSD(unittest.TestCase):
	def test_get_current_day(self):
		today = UTCDateTime(UTCDateTime.now().year, UTCDateTime.now().month, UTCDateTime.now().day)
		self.assertEqual(checkMSD.get_current_day(), today)
	
	def test_process_day_net(self):
		day = '2015001'
		net = 'CU'
		dataless_location = '/APPS/metadata/SEED/%s.dataless' % net
		clients = {'NEIC': True, 'ASL':True}
		test_case = [{'NEIC': 0.0, 'Year': 2015, 'sncl': 'CU.BBGH.00.BH1', 'MSD': 99.99997106481482, 'Day': 1, 'ASL': 0.0}, {'NEIC': 0.0, 'Year': 2015, 'sncl': 'CU.MTDJ.00.BH2', 'MSD': 99.99997106481482, 'Day': 1, 'ASL': 0.0}, {'NEIC': 0.0, 'Year': 2015, 'sncl': 'CU.GRTK.20.LN2', 'MSD': 99.9988425925926, 'Day': 1, 'ASL': 0.0}, {'NEIC': 0.0, 'Year': 2015, 'sncl': 'CU.GRTK.20.LNZ', 'MSD': 99.9988425925926, 'Day': 1, 'ASL': 0.0}, {'NEIC': 0.0, 'Year': 2015, 'sncl': 'CU.GRTK.20.LN1', 'MSD': 99.9988425925926, 'Day': 1, 'ASL': 0.0}, {'NEIC': 0.0, 'Year': 2015, 'sncl': 'CU.ANWB.20.HN1', 'MSD': 0.0, 'Day': 1, 'ASL': 0.0}, {'NEIC': 0.0, 'Year': 2015, 'sncl': 'CU.ANWB.20.HN2', 'MSD': 0.0, 'Day': 1, 'ASL': 0.0}, {'NEIC': 0.0, 'Year': 2015, 'sncl': 'CU.ANWB.20.HNZ', 'MSD': 0.0, 'Day': 1, 'ASL': 0.0}, {'NEIC': 0.0, 'Year': 2015, 'sncl': 'CU.BBGH.20.HN1', 'MSD': 0.0, 'Day': 1, 'ASL': 0.0}, {'NEIC': 0.0, 'Year': 2015, 'sncl': 'CU.BBGH.20.HN2', 'MSD': 0.0, 'Day': 1, 'ASL': 0.0}, {'NEIC': 0.0, 'Year': 2015, 'sncl': 'CU.BBGH.20.HNZ', 'MSD': 0.0, 'Day': 1, 'ASL': 0.0}, {'NEIC': 0.0, 'Year': 2015, 'sncl': 'CU.BCIP.00.BH1', 'MSD': 0.0, 'Day': 1, 'ASL': 0.0}, {'NEIC': 0.0, 'Year': 2015, 'sncl': 'CU.BCIP.00.BH2', 'MSD': 0.0, 'Day': 1, 'ASL': 0.0}, {'NEIC': 0.0, 'Year': 2015, 'sncl': 'CU.BCIP.00.BHZ', 'MSD': 0.0, 'Day': 1, 'ASL': 0.0}, {'NEIC': 0.0, 'Year': 2015, 'sncl': 'CU.BCIP.20.HN1', 'MSD': 0.0, 'Day': 1, 'ASL': 0.0}, {'NEIC': 0.0, 'Year': 2015, 'sncl': 'CU.BCIP.20.HN2', 'MSD': 0.0, 'Day': 1, 'ASL': 0.0}, {'NEIC': 0.0, 'Year': 2015, 'sncl': 'CU.BCIP.20.HNZ', 'MSD': 0.0, 'Day': 1, 'ASL': 0.0}, {'NEIC': 0.0, 'Year': 2015, 'sncl': 'CU.BCIP.00.LH1', 'MSD': 0.0, 'Day': 1, 'ASL': 0.0}, {'NEIC': 0.0, 'Year': 2015, 'sncl': 'CU.BCIP.00.LH2', 'MSD': 0.0, 'Day': 1, 'ASL': 0.0}, {'NEIC': 0.0, 'Year': 2015, 'sncl': 'CU.BCIP.00.LHZ', 'MSD': 0.0, 'Day': 1, 'ASL': 0.0}, {'NEIC': 0.0, 'Year': 2015, 'sncl': 'CU.BCIP.20.LN1', 'MSD': 0.0, 'Day': 1, 'ASL': 0.0}, {'NEIC': 0.0, 'Year': 2015, 'sncl': 'CU.BCIP.20.LN2', 'MSD': 0.0, 'Day': 1, 'ASL': 0.0}, {'NEIC': 0.0, 'Year': 2015, 'sncl': 'CU.BCIP.20.LNZ', 'MSD': 0.0, 'Day': 1, 'ASL': 0.0}, {'NEIC': 0.0, 'Year': 2015, 'sncl': 'CU.BCIP.00.VMU', 'MSD': 0.0, 'Day': 1, 'ASL': 0.0}, {'NEIC': 0.0, 'Year': 2015, 'sncl': 'CU.BCIP.00.VMV', 'MSD': 0.0, 'Day': 1, 'ASL': 0.0}, {'NEIC': 0.0, 'Year': 2015, 'sncl': 'CU.BCIP.00.VMW', 'MSD': 0.0, 'Day': 1, 'ASL': 0.0}, {'NEIC': 0.0, 'Year': 2015, 'sncl': 'CU.GRGR.20.HN1', 'MSD': 0.0, 'Day': 1, 'ASL': 0.0}, {'NEIC': 0.0, 'Year': 2015, 'sncl': 'CU.GRGR.20.HN2', 'MSD': 0.0, 'Day': 1, 'ASL': 0.0}, {'NEIC': 0.0, 'Year': 2015, 'sncl': 'CU.GRGR.20.HNZ', 'MSD': 0.0, 'Day': 1, 'ASL': 0.0}, {'NEIC': 0.0, 'Year': 2015, 'sncl': 'CU.GRTK.20.HN1', 'MSD': 0.0, 'Day': 1, 'ASL': 0.0}, {'NEIC': 0.0, 'Year': 2015, 'sncl': 'CU.GRTK.20.HN2', 'MSD': 0.0, 'Day': 1, 'ASL': 0.0}, {'NEIC': 0.0, 'Year': 2015, 'sncl': 'CU.GRTK.20.HNZ', 'MSD': 0.0, 'Day': 1, 'ASL': 0.0}, {'NEIC': 0.0, 'Year': 2015, 'sncl': 'CU.GTBY.20.HN1', 'MSD': 0.0, 'Day': 1, 'ASL': 0.0}, {'NEIC': 0.0, 'Year': 2015, 'sncl': 'CU.GTBY.20.HN2', 'MSD': 0.0, 'Day': 1, 'ASL': 0.0}, {'NEIC': 0.0, 'Year': 2015, 'sncl': 'CU.GTBY.20.HNZ', 'MSD': 0.0, 'Day': 1, 'ASL': 0.0}, {'NEIC': 0.0, 'Year': 2015, 'sncl': 'CU.MTDJ.20.HN1', 'MSD': 0.0, 'Day': 1, 'ASL': 0.0}, {'NEIC': 0.0, 'Year': 2015, 'sncl': 'CU.MTDJ.20.HN2', 'MSD': 0.0, 'Day': 1, 'ASL': 0.0}, {'NEIC': 0.0, 'Year': 2015, 'sncl': 'CU.MTDJ.20.HNZ', 'MSD': 0.0, 'Day': 1, 'ASL': 0.0}, {'NEIC': 0.0, 'Year': 2015, 'sncl': 'CU.SDDR.20.HN1', 'MSD': 0.0, 'Day': 1, 'ASL': 0.0}, {'NEIC': 0.0, 'Year': 2015, 'sncl': 'CU.SDDR.20.HN2', 'MSD': 0.0, 'Day': 1, 'ASL': 0.0}, {'NEIC': 0.0, 'Year': 2015, 'sncl': 'CU.SDDR.20.HNZ', 'MSD': 0.0, 'Day': 1, 'ASL': 0.0}, {'NEIC': 0.0, 'Year': 2015, 'sncl': 'CU.TGUH.20.HN1', 'MSD': 0.0, 'Day': 1, 'ASL': 0.0}, {'NEIC': 0.0, 'Year': 2015, 'sncl': 'CU.TGUH.20.HN2', 'MSD': 0.0, 'Day': 1, 'ASL': 0.0}, {'NEIC': 0.0, 'Year': 2015, 'sncl': 'CU.TGUH.20.HNZ', 'MSD': 0.0, 'Day': 1, 'ASL': 0.0}]
		self.assertEqual(checkMSD.process_day_net(UTCDateTime(day), net, Parser(dataless_location), clients), test_case)

if __name__ == '__main__':
	unittest.main()